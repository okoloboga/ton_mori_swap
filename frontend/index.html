```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TON Bridge Mini App</title>
  <script src="https://unpkg.com/@tonconnect/ui@1.0.0/dist/tonconnect-ui.min.js"></script>
  <script src="https://unpkg.com/@ton/ton@13.8.1/dist/ton.esm.js"></script>
  <style>
    body { font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background-color: #f0f2f5; }
    .container { text-align: center; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
    button { padding: 10px 20px; margin: 10px; font-size: 16px; cursor: pointer; background-color: #0088cc; color: white; border: none; border-radius: 5px; }
    button:disabled { background-color: #ccc; cursor: not-allowed; }
    #info { margin: 10px 0; }
  </style>
</head>
<body>
  <div class="container">
    <h2>TON Bridge</h2>
    <div id="info"></div>
    <button id="connect-wallet">Подключить кошелек</button>
    <button id="confirm-transaction" disabled>Купить</button>
  </div>

  <script>
    const tonConnectUI = new TONConnectUI.TonConnectUI({
      manifestUrl: 'http://moriswap.space/tonconnect-manifest.json'
    });

    const urlParams = new URLSearchParams(window.location.search);
    let quoteId = urlParams.get('quoteId');
    const amount = parseFloat(urlParams.get('amount'));
    const coinCount = urlParams.get('coin_count');
    const solanaWallet = urlParams.get('solana_wallet');
    const userId = urlParams.get('user_id');

    const infoDiv = document.getElementById('info');
    infoDiv.innerHTML = `
      <p>Отправите: ${amount} USDT</p>
      <p>Получите: ~${coinCount} $MORI на ${solanaWallet.slice(0, 6)}...${solanaWallet.slice(-4)}</p>
    `;

    const connectButton = document.getElementById('connect-wallet');
    const confirmButton = document.getElementById('confirm-transaction');
    connectButton.addEventListener('click', async () => {
      try {
        await tonConnectUI.connectWallet();
        const wallet = tonConnectUI.account;
        if (wallet) {
          infoDiv.innerHTML += `<p>Кошелек подключен: ${wallet.address.slice(0, 6)}...${wallet.address.slice(-4)}</p>`;
          connectButton.disabled = true;

          window.Telegram.WebApp.sendData(JSON.stringify({ ton_wallet: wallet.address, user_id: userId }));
          pollQuoteId(userId);
        }
      } catch (e) {
        infoDiv.innerHTML += `<p>Ошибка подключения: ${e.message}</p>`;
      }
    });

    async function pollQuoteId(userId) {
      while (!quoteId) {
        const response = await fetch(`http://moriswap.space:8000/get-quote-id?userId=${userId}`);
        const data = await response.json();
        if (data.quoteId) {
          quoteId = data.quoteId;
          infoDiv.innerHTML += `<p>Quote ID: ${quoteId}</p>`;
          confirmButton.disabled = false;
        }
        await new Promise(resolve => setTimeout(resolve, 2000));
      }
    }

    confirmButton.addEventListener('click', async () => {
      try {
        const { beginCell, toNano } = TON;

        const forwardPayload = beginCell().storeStringTail(quoteId).endCell();
        const body = beginCell()
          .storeUint(0xf8a7ea5, 32)
          .storeUint(0, 64)
          .storeCoins(BigInt(amount * 10**6))
          .storeAddress('EQAj3SoOk4MPzjn816Crw1b4RxW79fB_Z549tyCd9HIQV6b7')
          .storeAddress(tonConnectUI.account.address)
          .storeBit(0)
          .storeCoins(toNano('0.02'))
          .storeBit(1)
          .storeRef(forwardPayload)
          .endCell();

        const response = await fetch('https://toncenter.com/api/v2/jsonRPC', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            id: 1,
            jsonrpc: '2.0',
            method: 'runGetMethod',
            params: {
              address: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',
              method: 'get_wallet_address',
              stack: [{ type: 'slice', value: tonConnectUI.account.address }]
            }
          })
        });
        const result = await response.json();
        const jettonWalletAddress = result.result.stack[0].value;

        const transaction = {
          messages: [{
            address: jettonWalletAddress,
            amount: toNano('0.1').toString(),
            payload: body.toBoc().toString('base64')
          }]
        };

        await tonConnectUI.sendTransaction(transaction);
        infoDiv.innerHTML += '<p>Транзакция отправлена!</p>';
        window.Telegram.WebApp.close();
      } catch (e) {
        infoDiv.innerHTML += `<p>Ошибка транзакции: ${e.message}</p>`;
      }
    });

    window.Telegram.WebApp.ready();
    window.Telegram.WebApp.expand();
  </script>
</body>
</html>
